56// Room data - Extended with more rooms
const roomData = [
    {
        id: 1,
        pid: "M127G",
        title: "Modern Apartment in Sector 127",
        location: "Sector 127,Mohali",
        type: "1 BHK",
        gender: "for-all",
        price: "₹14,500",
        features: ["Fully Furnished", "Independent", "Owner Free"],
        description: "Beautiful 1BHK with modern amenities near shopping center.",
        media: [
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/1.M127G/A1.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/1.M127G/A2.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/1.M127G/A3.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/1.M127G/A4.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/1.M127G/A5.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/1.M127G/A6.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/1.M127G/A7.jpg?updatedAt=1754683721878" }
            // { type: "image", src: "assets/1.M127G/A1.jpg" },
            // { type: "image", src: "assets/1.M127G/A2.jpg" },
            // { type: "image", src: "assets/1.M127G/A3.jpg" },
            // { type: "image", src: "assets/1.M127G/A4.jpg" },
            // { type: "image", src: "assets/1.M127G/A5.jpg" },
            // { type: "image", src: "assets/1.M127G/A6.jpg" },
            // { type: "image", src: "assets/1.M127G/A7.jpg" }
            
        ]
    },
    {
        id: 2,
        pid: "M114K",
        title: "Room with Kitchen in Sector 114,Mohali",
        location: "Sector 114,Mohali",
        type: "Room with Kitchen",
        gender: "boys",
        price: "₹6,000",
        features: ["Semi-Furnished", "Independent"],
        description: "Spacious 2BHK with balcony and great ventilation.",
        media: [
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/2.M114K/B1.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/2.M114K/B2.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/2.M114K/B3.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/2.M114K/B4.jpg?updatedAt=1754683721878" }
            // { type: "image", src: "assets/2.M114K/B1.jpg" },
            // { type: "image", src: "assets/2.M114K/B2.jpg" },
            // { type: "image", src: "assets/2.M114K/B3.jpg" },
            // { type: "image", src: "assets/2.M114K/B4.jpg" }
        ]
    },
    {
        id: 3,
        pid: "C19B",
        title: "Spacious Room with Kitchen in Sector 19,Chandigarh",
        location: "Sector 19,Chandigarh",
        type: "Room with Kitchen",
        gender: "girls",
        price: "₹11,000",
        features: ["Fully Furnished", "AC" , "RO"],
        description: "Luxury studio apartment with premium amenities.",
        media: [
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/3.C19G/C1.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/3.C19G/C2.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/3.C19G/C3.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/3.C19G/C4.jpg?updatedAt=1754683721878" }
            // { type: "image", src: "assets/3.C19G/C1.jpg" },
            // { type: "image", src: "assets/3.C19G/C2.jpg" },
            // { type: "image", src: "assets/3.C19G/C3.jpg" },
            // { type: "image", src: "assets/3.C19G/C4.jpg" }
        ]
    },
    {
        id: 4,
        pid: "C23D",
        title: "1 BHK in Sector 23D, Chandigarh",
        location: "Sector 23D,Chandigarh",
        type: "1 BHK",
        gender: "for-all",
        price: "₹13,500",
        features: ["Fully Furnished", "Independent", "Owner Free"],
        description: "Perfect for families with children near schools and parks.",
        media: [
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/4.C23D/D1.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/4.C23D/D2.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/4.C23D/D3.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/4.C23D/D4.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/4.C23D/D5.jpg?updatedAt=1754683721878" },
            { type: "video", src: "https://ik.imagekit.io/minkal/assets/4.C23D/D6.mp4?updatedAt=1754683721878" }
            // { type: "image", src: "assets/4.C23D/D1.jpg" },
            // { type: "image", src: "assets/4.C23D/D2.jpg" },
            // { type: "image", src: "assets/4.C23D/D3.jpg" },
            // { type: "image", src: "assets/4.C23D/D4.jpg" },
            // { type: "image", src: "assets/4.C23D/D5.jpg" },
            // { type: "video", src: "assets/4.C23D/D6.mp4" }
           
        ]
    },
    {
        id: 5,
        pid: "M126",
        title: "1 BHK in Sector 126, Mohali",
        location: "Sector 126,Mohali",
        type: "1 BHK",
        gender: "for-all",
        price: "₹12,000",
        features: ["2nd Floor", "Newly built", "RO"],
        description: "Comfortable shared accommodation for working professionals.",
        media: [
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/5.M126/D1.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/5.M126/D2.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/5.M126/D3.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/5.M126/D4.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/5.M126/D5.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/5.M126/D6.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/5.M126/D7.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/5.M126/D8.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/5.M126/D9.jpg?updatedAt=1754683721878" },
            // { type: "image", src: "assets/5.M126/D1.jpg" },
            // { type: "image", src: "assets/5.M126/D2.jpg" },
            // { type: "image", src: "assets/5.M126/D3.jpg" },
            // { type: "image", src: "assets/5.M126/D4.jpg" },
            // { type: "image", src: "assets/5.M126/D5.jpg" },
            // { type: "image", src: "assets/5.M126/D6.jpg" },
            // { type: "image", src: "assets/5.M126/D7.jpg" },
            // { type: "image", src: "assets/5.M126/D8.jpg" },
            // { type: "image", src: "assets/5.M126/D9.jpg" },
        ]
    },
    {
        id: 6,
        pid: "M126X",
        title: "2 BHK in Sector 126, Mohali",
        location: "Sector 126,Mohali",
        type: "2 BHK",
        gender: "for-all",
        price: "₹18,000",
        features: ["Un furnished", "Balcony", "Newly built"],
        description: "Newly constructed premium 1BHK with modern fittings.",
        media: [
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A1.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A2.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A3.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A4.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A5.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A6.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A7.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A8.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A9.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A10.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A11.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A12.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A13.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A14.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/6.M126X/A15.jpg?updatedAt=1754683721878" },
            // { type: "image", src: "assets/6.M126X/A1.jpg" },
            // { type: "image", src: "assets/6.M126X/A2.jpg" },
            // { type: "image", src: "assets/6.M126X/A3.jpg" },
            // { type: "image", src: "assets/6.M126X/A4.jpg" },
            // { type: "image", src: "assets/6.M126X/A5.jpg" },
            // { type: "image", src: "assets/6.M126X/A6.jpg" },
            // { type: "image", src: "assets/6.M126X/A7.jpg" },
            // { type: "image", src: "assets/6.M126X/A8.jpg" },
            // { type: "image", src: "assets/6.M126X/A9.jpg" },
            // { type: "image", src: "assets/6.M126X/A10.jpg" },
            // { type: "image", src: "assets/6.M126X/A11.jpg" },
            // { type: "image", src: "assets/6.M126X/A12.jpg" },
            // { type: "image", src: "assets/6.M126X/A13.jpg" },
            // { type: "image", src: "assets/6.M126X/A14.jpg" },
            // { type: "image", src: "assets/6.M126X/A15.jpg" },
        ]
    },
    {
        id: 7,
        pid: "C20A",
        title: "PG in Sector 20A, Chandigarh",
        location: "Sector 20A,Chandigarh",
        type: "PG",
        gender: "girls",
        price: "₹5,500",
        features: ["Fully Furnished", "Without food", "refrigerator"],
        description: "Well-maintained PG with modern kitchen and bathrooms.",
        media: [
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/7.C20A/B1.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/7.C20A/B2.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/7.C20A/B3.jpg?updatedAt=1754683721878" },
            { type: "image", src: "https://ik.imagekit.io/minkal/assets/7.C20A/B4.jpg?updatedAt=1754683721878" }
            // { type: "image", src: "assets/7.C20A/B1.jpg" },
            // { type: "image", src: "assets/7.C20A/B2.jpg" },
            // { type: "image", src: "assets/7.C20A/B3.jpg" },
            // { type: "image", src: "assets/7.C20A/B4.jpg" }
        ]
    },
    {
        id: 8,
        pid: "RC65P8",
        title: "Luxury Studio in Sector 56",
        location: "Sector 56",
        type: "studio",
        gender: "for-all",
        price: "₹11,500",
        features: ["Swimming Pool", "Gym", "24/7 Security"],
        description: "Beautiful studio with modern amenities and great view.",
        media: [
            { type: "image", src: "https://images.unsplash.com/photo-1616486029423-aaa4789e8c9a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1560448204-603b3fc33ddc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1616486029423-aaa4789e8c9a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" }
        ]
    },
    {
        id: 9,
        pid: "RC65P9",
        title: "Shared Room in Sector 12",
        location: "Sector 12",
        type: "shared",
        gender: "girls",
        price: "₹7,200",
        features: ["WiFi", "Laundry", "Common Kitchen"],
        description: "Safe and comfortable shared accommodation for girls.",
        media: [
            { type: "image", src: "https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1505692952047-1a78307da8f2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1556911220-e15b29be8c8f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" }
        ]
    },
    // Additional rooms for pagination
    {
        id: 10,
        pid: "RC65P10",
        title: "Cozy 1BHK in Sector 23",
        location: "Sector 23",
        type: "1 BHK",
        gender: "boys",
        price: "₹7,800",
        features: ["WiFi", "Furnished", "Near Market"],
        description: "Cozy 1BHK perfect for single professionals.",
        media: [
            { type: "image", src: "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1499916078039-922301b0eb9b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" }
        ]
    },
    {
        id: 11,
        pid: "RC65P11",
        title: "Modern 2BHK in Sector 8",
        location: "Sector 8",
        type: "2 BHK",
        gender: "family",
        price: "₹16,500",
        features: ["AC", "Parking", "Garden View"],
        description: "Modern 2BHK with garden view and premium amenities.",
        media: [
            { type: "image", src: "https://images.unsplash.com/photo-1595526114035-0d45ed16cfbf?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1615529162924-f8605388463a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" }
        ]
    },
    {
        id: 12,
        pid: "RC65P12",
        title: "Luxury 3BHK in Sector 56",
        location: "Sector 56",
        type: "3 BHK",
        gender: "family",
        price: "₹25,000",
        features: ["Swimming Pool", "Gym", "Club House"],
        description: "Luxury 3BHK with all premium amenities and facilities.",
        media: [
            { type: "image", src: "https://images.unsplash.com/photo-1574362848149-11496d93a7c7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1613490493576-7fde63acd811?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" }
        ]
    },
    {
        id: 13,
        pid: "RC65P13",
        title: "Budget Studio in Sector 45",
        location: "Sector 45",
        type: "studio",
        gender: "for-all",
        price: "₹8,000",
        features: ["WiFi", "Basic Furnishing", "Near Bus Stop"],
        description: "Affordable studio apartment for budget-conscious tenants.",
        media: [
            { type: "image", src: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" }
        ]
    },
    {
        id: 14,
        pid: "RC65P14",
        title: "Shared Room in Sector 8",
        location: "Sector 8",
        type: "shared",
        gender: "boys",
        price: "₹5,500",
        features: ["WiFi", "Common Kitchen", "Laundry"],
        description: "Affordable shared accommodation with all basic amenities.",
        media: [
            { type: "image", src: "https://images.unsplash.com/photo-1556911220-e15b29be8c8f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1505692952047-1a78307da8f2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" }
        ]
    },
    {
        id: 15,
        pid: "RC65P15",
        title: "Premium 1BHK in Sector 12",
        location: "Sector 12",
        type: "1 BHK",
        gender: "girls",
        price: "₹10,200",
        features: ["AC", "Balcony", "Security"],
        description: "Premium 1BHK with excellent security and modern amenities.",
        media: [
            { type: "image", src: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "image", src: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" }
        ]
    },
    {
        id: 16,
        pid: "RC65P16",
        title: "Modern Apartment with Video Tour",
        location: "Sector 23",
        type: "1 BHK",
        gender: "girls",
        price: "₹9,000",
        features: ["AC", "WiFi", "Attached Bath", "Video Tour"],
        description: "Experience this modern 1BHK with a virtual video tour.",
        media: [
            { type: "image", src: "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
            { type: "video", src: "/placeholder-video.mp4" }, // Placeholder video URL
            { type: "image", src: "https://images.unsplash.com/photo-1499916078039-922301b0eb9b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" }
        ]
    }
];

// Pagination variables
let currentlyDisplayed = 0;
const roomsPerPage = 12;
let filteredRooms = [...roomData];

// Mobile menu functionality
document.getElementById('mobileMenuBtn').addEventListener('click', function() {
    const navLinks = document.getElementById('navLinks');
    navLinks.classList.toggle('active');
});

// Function to generate cards with pagination
function generateCards(rooms, append = false) {
    const container = document.getElementById('cardsContainer');

    if (!append) {
        container.innerHTML = '';
        currentlyDisplayed = 0;
    }

    if (rooms.length === 0) {
        container.innerHTML = '<div class="no-results" style="grid-column: 1 / -1; text-align: center; padding: 50px; color: white; font-size: 1.5rem; background: rgba(0,0,0,0.2); border-radius: 15px; margin-top: 20px;">No rooms found matching your criteria</div>';
        updatePaginationUI(0, 0);
        return;
    }

    const startIndex = append ? currentlyDisplayed : 0;
    const endIndex = Math.min(startIndex + roomsPerPage, rooms.length);
    const roomsToShow = rooms.slice(startIndex, endIndex);

    roomsToShow.forEach(room => {
        const cardEl = document.createElement('div');
        cardEl.className = 'card';
        cardEl.dataset.location = room.location.toLowerCase().replace(' ', '-');
        cardEl.dataset.type = room.type.toLowerCase().replace(' ', '-');
        cardEl.dataset.gender = room.gender;

        // Generate slider HTML
        let sliderHTML = '';
        room.media.forEach((mediaItem, index) => {
            if (mediaItem.type === 'image') {
                sliderHTML += `<img src="${mediaItem.src}" alt="${room.title}">`;
            } else if (mediaItem.type === 'video') {
                // Removed 'loop' attribute here
                sliderHTML += `<video src="${mediaItem.src}" controls muted playsinline></video>`;
            }
        });

        // Generate dots for slider navigation
        let dotsHTML = '';
        for (let i = 0; i < room.media.length; i++) {
            dotsHTML += `<div class="slider-dot ${i === 0 ? 'active' : ''}" data-index="${i}"></div>`;
        }

        // Generate features HTML
        let featuresHTML = '';
        room.features.forEach(feature => {
            featuresHTML += `<div class="feature"><i class="fas fa-check-circle"></i> ${feature}</div>`;
        });

        // Function to get gender display text
        function getGenderDisplayText(gender) {
            switch(gender) {
                case 'girls': return 'For Girls';
                case 'boys': return 'For Boys';
                case 'family': return 'For Family';
                case 'for-all': return 'FOR ALL';
                default: return 'For All';
            }
        }

        cardEl.innerHTML = `
            <div class="slider-container">
                <div class="slider">${sliderHTML}</div>
                <button class="prev-btn"><i class="fas fa-chevron-left"></i></button>
                <button class="next-btn"><i class="fas fa-chevron-right"></i></button>
                <div class="slider-controls">${dotsHTML}</div>
            </div>
            <div class="card-content">
                <div class="card-header">
                    <div>
                        <div class="room-header">
                            <h2>${room.title}</h2>
                            <span class="room-id">PID: ${room.pid || 'N/A'}</span>
                        </div>
                        <div class="location">
                            <i class="fas fa-map-marker-alt"></i> ${room.location}
                        </div>
                        <div class="room-type">
                            <i class="fas fa-home"></i> ${room.type}
                        </div>
                    </div>
                    <div class="gender-tag">${getGenderDisplayText(room.gender)}</div>
                </div>
                <div class="features">
                    ${featuresHTML}
                </div>
                <div class="card-footer">
                    <div class="price">${room.price} <span>/Rent per month</span></div>
                    <button class="contact-btn">Contact</button>
                </div>
            </div>
        `;

        container.appendChild(cardEl);

        // Find the contact button within the newly created card element
        const contactBtn = cardEl.querySelector('.contact-btn');
        contactBtn.addEventListener('click', () => {
            const phoneNumber = '+917830063882'; // Your WhatsApp number
            const message = `Hello Sir/Mam,\nI found your property with PID: ${room.pid} on the RentMyProperty platform,\nand I am interested in visiting it.\nPlease let me know the suitable time.\nThank you!`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        });

        // Initialize slider for this card
        initSlider(cardEl.querySelector('.slider-container'));
    });

    currentlyDisplayed = endIndex;
    updatePaginationUI(currentlyDisplayed, rooms.length);
}

// Update pagination UI
function updatePaginationUI(displayed, total) {
    const moreBtn = document.getElementById('moreRoomsBtn');
    const currentCount = document.getElementById('currentCount');
    const totalCount = document.getElementById('totalCount');

    currentCount.textContent = displayed;
    totalCount.textContent = total;

    if (displayed >= total) {
        moreBtn.style.display = 'none';
    } else {
        moreBtn.style.display = 'inline-flex';
    }
}

// Initialize slider functionality
function initSlider(sliderContainer) {
    const slider = sliderContainer.querySelector('.slider');
    const mediaElements = slider.querySelectorAll('img, video'); // Select both img and video
    const prevBtn = sliderContainer.querySelector('.prev-btn');
    const nextBtn = sliderContainer.querySelector('.next-btn');
    const dots = sliderContainer.querySelectorAll('.slider-dot');

    let currentIndex = 0;
    const totalMedia = mediaElements.length;
    let autoSlideInterval;
    const SLIDE_INTERVAL = 3000; // 3 seconds between slides for images

    let currentVideoElement = null; // To keep track of the currently playing video

    // Function to handle video ended event
    function handleVideoEnded() {
        if (currentVideoElement) {
            currentVideoElement.removeEventListener('ended', handleVideoEnded);
            currentVideoElement = null;
        }
        goToNextSlide(); // Move to the next slide
    }

    // Function to show slide
    function showSlide(index) {
        // Pause any currently playing video and remove its ended listener
        mediaElements.forEach(el => {
            el.classList.remove('active');
            if (el.tagName === 'VIDEO') {
                el.pause();
                // Always remove the ended listener from any video that was previously active
                el.removeEventListener('ended', handleVideoEnded);
            }
        });
        dots.forEach(dot => dot.classList.remove('active'));

        mediaElements[index].classList.add('active');
        dots[index].classList.add('active');
        slider.style.transform = `translateX(-${index * 100}%)`;

        currentIndex = index; // Update currentIndex

        // Manage auto-slide and video playback based on the new active element
        if (mediaElements[index].tagName === 'VIDEO') {
            mediaElements[index].play();
            stopAutoSlide(); // Stop image auto-slide
            currentVideoElement = mediaElements[index];
            currentVideoElement.addEventListener('ended', handleVideoEnded); // Add ended listener for the current video
        } else { // This means it's an image
            startAutoSlide(); // Start image auto-slide
        }
    }

    // Set initial active state
    if (totalMedia > 0) {
        showSlide(currentIndex);
    }

    // Function to go to next slide
    function goToNextSlide() {
        let nextIndex = (currentIndex + 1) % totalMedia;
        showSlide(nextIndex);
    }

    // Function to start auto sliding
    function startAutoSlide() {
        stopAutoSlide(); // Clear any existing interval
        // Only start auto-slide if the current element is an image and there's more than one media item
        if (totalMedia > 1 && mediaElements[currentIndex] && mediaElements[currentIndex].tagName === 'IMG') {
            autoSlideInterval = setInterval(goToNextSlide, SLIDE_INTERVAL);
        }
    }

    // Function to stop auto sliding
    function stopAutoSlide() {
        if (autoSlideInterval) {
            clearInterval(autoSlideInterval);
            autoSlideInterval = null;
        }
    }

    // Next slide (manual navigation)
    nextBtn.addEventListener('click', () => {
        goToNextSlide();
        // showSlide will handle starting/stopping auto-slide based on media type
    });

    // Previous slide (manual navigation)
    prevBtn.addEventListener('click', () => {
        let prevIndex = (currentIndex - 1 + totalMedia) % totalMedia;
        showSlide(prevIndex);
        // showSlide will handle starting/stopping auto-slide based on media type
    });

    // Dot navigation
    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
            showSlide(index);
            // showSlide will handle starting/stopping auto-slide based on media type
        });
    });

    // Pause auto slide on hover
    sliderContainer.addEventListener('mouseenter', stopAutoSlide);
    sliderContainer.addEventListener('mouseleave', () => {
        // Only restart auto-slide on mouse leave if the current slide is an image
        if (mediaElements[currentIndex] && mediaElements[currentIndex].tagName === 'IMG') {
            startAutoSlide();
        }
    });
}

// Filter functionality - UPDATED with new logic for FOR ALL option
function filterRooms() {
    const location = document.getElementById('location').value;
    const type = document.getElementById('bhk').value;
    const gender = document.getElementById('gender').value;
    const price = document.getElementById('price').value;

    filteredRooms = roomData.filter(room => {
        // Location filter
        if (location !== 'all' &&
            !room.location.toLowerCase().includes(location.replace('-', ' '))) {
            return false;
        }

        // Type filter - FIXED: Now uses exact matching
        if (type !== 'all' && room.type !== type) {
            return false;
        }

        // Gender filter - UPDATED: New logic for FOR ALL functionality
        if (gender !== 'all') {
            if (gender === 'for-all') {
                // If "FOR ALL" is selected, show only properties marked as "for-all"
                if (room.gender !== 'for-all') {
                    return false;
                }
            } else {
                // If a specific gender is selected (boys, girls, family), show both that gender AND "for-all" properties
                if (room.gender !== gender && room.gender !== 'for-all') {
                    return false;
                }
            }
        }

        // Price filter
        if (price !== 'all') {
            const roomPrice = parseInt(room.price.replace(/[^0-9]/g, ''));
            if (price === '<=10000' && roomPrice > 10000) return false;
            if (price === '<=20000' && roomPrice > 20000) return false;
            if (price === '<=30000' && roomPrice > 30000) return false;
            if (price === '>=30000' && roomPrice < 30000) return false;
        }

        return true;
    });

    generateCards(filteredRooms);
}

// Reset filters
function resetFilters() {
    document.getElementById('location').value = 'all';
    document.getElementById('bhk').value = 'all';
    document.getElementById('gender').value = 'all';
    document.getElementById('price').value = 'all';
    filteredRooms = [...roomData];
    generateCards(filteredRooms);
}

// Load more rooms
function loadMoreRooms() {
    generateCards(filteredRooms, true);
}

// Function to handle WhatsApp button click for general inquiries
function openWhatsApp() {
    const phoneNumber = '+917830063882';
    const message = 'Hello RentMyProperty team,\n\nI came across your website and would like to get more information about your properties and services.\n\nCould you please provide me with more details?\n\nThank you!';
    const encodedMessage = encodeURIComponent(message);
    const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
    window.open(whatsappUrl, '_blank');
}

// Initialize the page
document.addEventListener('DOMContentLoaded', () => {
    generateCards(roomData);

    // Event listeners
    document.getElementById('applyFilters').addEventListener('click', filterRooms);
    document.getElementById('resetFilters').addEventListener('click', resetFilters);
    document.getElementById('moreRoomsBtn').addEventListener('click', loadMoreRooms);
});